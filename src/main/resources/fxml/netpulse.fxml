<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.Arc?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.Group?>

<VBox styleClass="main-container"
      stylesheets="@../style/style.css"
      xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.izo.netpulse.ui.NetPulseController"
      maxWidth="-Infinity" maxHeight="-Infinity"
      minWidth="-Infinity" minHeight="-Infinity">

    <HBox alignment="CENTER_RIGHT" styleClass="title-bar"
          style="-fx-padding: 0 0 0 5;"
          onMousePressed="#handleMousePressed"
          onMouseDragged="#handleMouseDragged">

        <Text text="NetPulse Monitor" styleClass="header-text" />
        <Region HBox.hgrow="ALWAYS" />

        <Button onAction="#handleMinimise" styleClass="window-button">
            <graphic>
                <SVGPath content="M0,5 H10" stroke="white" strokeWidth="1.5" />
            </graphic>
        </Button>

        <Button fx:id="maximizeButton" onAction="#handleMaximize" styleClass="window-button">
            <graphic>
                <SVGPath fx:id="maximizeIcon" content="M1,1 H9 V9 H1 V1 Z M2,2 V8 H8 V2 H2 Z" fill="white" />
            </graphic>
        </Button>

        <Button onAction="#handleClose" styleClass="window-button-close">
            <graphic>
                <SVGPath content="M1,1 L9,9 M9,1 L1,9" stroke="white" strokeWidth="1.5" />
            </graphic>
        </Button>
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <Tab text="SPEED TEST">
            <VBox alignment="CENTER" spacing="30" style="-fx-padding: 40;">
                <StackPane prefHeight="400">
                    <Group StackPane.alignment="CENTER">
                        <Arc centerX="0" centerY="0" radiusX="120" radiusY="120"
                             startAngle="60" length="-300" type="OPEN"
                             stroke="#1e1e1e" strokeWidth="15" fill="transparent" strokeLineCap="ROUND"/>

                        <Arc fx:id="progressArc" centerX="0" centerY="0" radiusX="120" radiusY="120"
                             startAngle="60" length="0" type="OPEN"
                             stroke="#1DB954" strokeWidth="15" fill="transparent" strokeLineCap="ROUND"/>

                        <Circle fx:id="needleCircle" radius="6" fill="white" stroke="#1DB954" strokeWidth="2" />

                        <Group mouseTransparent="true">
                            <Label text="0" translateX="75" translateY="-120" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                            <Label text="60" translateX="125" translateY="35" style="-fx-text-fill: #888888;"/>
                            <Label text="125" translateX="-10" translateY="135" style="-fx-text-fill: #888888;"/>
                            <Label text="190" translateX="-145" translateY="35" style="-fx-text-fill: #888888;"/>
                            <Label text="250+" translateX="-105" translateY="-120" style="-fx-text-fill: #888888;"/>
                        </Group>

                        <VBox alignment="CENTER" translateX="-100" translateY="-60" prefWidth="200" mouseTransparent="true">
                            <Label fx:id="speedValueLabel" text="0.0"
                                   style="-fx-font-size: 64px; -fx-text-fill: white; -fx-font-weight: bold;"/>
                            <Label fx:id="statusLabel" text="Mbps Download" styleClass="status-label"/>
                        </VBox>
                    </Group>
                </StackPane>
                <Button text="RUN PULSE TEST" onAction="#handleStartTest" styleClass="pulse-button"/>
            </VBox>
        </Tab>

        <Tab text="HISTORY">
            <VBox spacing="10" style="-fx-padding: 20;">
                <LineChart fx:id="speedChart"
                           styleClass="chart"
                           VBox.vgrow="ALWAYS"
                           animated="false"
                           legendSide="TOP"
                           createSymbols="false">
                    <xAxis>
                        <CategoryAxis side="BOTTOM" label="Time"
                                      tickMarkVisible="false"
                                      gapStartAndEnd="false" /> </xAxis>

                    <yAxis>
                        <NumberAxis side="LEFT" label="Speed (Mbps)"
                                    tickMarkVisible="false"
                                    minorTickVisible="false" /> </yAxis>

                </LineChart>
            </VBox>
        </Tab>
    </TabPane>
</VBox>