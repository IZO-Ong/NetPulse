<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.Arc?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.Group?>

<VBox styleClass="main-container"
      stylesheets="@../style/style.css"
      xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.izo.netpulse.ui.NetPulseController"
      maxWidth="-Infinity" maxHeight="-Infinity"
      minWidth="-Infinity" minHeight="-Infinity">

    <HBox alignment="CENTER_RIGHT" styleClass="title-bar"
          onMousePressed="#handleMousePressed"
          onMouseDragged="#handleMouseDragged">

        <Text text="NetPulse Monitor" styleClass="header-text" />
        <Region HBox.hgrow="ALWAYS" />

        <Button onAction="#handleMinimise" styleClass="window-button">
            <graphic>
                <SVGPath content="M0,5 H10" styleClass="window-icon" />
            </graphic>
        </Button>

        <Button onAction="#handleMaximize" styleClass="window-button">
            <graphic>
                <SVGPath fx:id="maximizeIcon" content="M1,1 H9 V9 H1 V1 Z M2,2 V8 H8 V2 H2 Z" styleClass="window-icon" />
            </graphic>
        </Button>

        <Button onAction="#handleClose" styleClass="window-button-close">
            <graphic>
                <SVGPath content="M1,1 L9,9 M9,1 L1,9" styleClass="window-icon" />
            </graphic>
        </Button>
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

        <Tab text="SPEED TEST">
            <VBox styleClass="speed-test-container" spacing="30" VBox.vgrow="ALWAYS">
                <StackPane VBox.vgrow="ALWAYS">
                    <Pane styleClass="gauge-pane" maxWidth="-Infinity" maxHeight="-Infinity" StackPane.alignment="CENTER">

                        <Arc centerX="200" centerY="200" radiusX="120" radiusY="120"
                             startAngle="60" length="-300" styleClass="gauge-arc-bg"/>

                        <Arc fx:id="progressArc" centerX="200" centerY="200" radiusX="120" radiusY="120"
                             startAngle="60" styleClass="progress-download" />

                        <Circle fx:id="needleCircle" centerX="200" centerY="200" radius="6"
                                styleClass="progress-download-needle" />

                        <Group fx:id="downloadMarkers">
                            <Label text="0" layoutX="275" layoutY="80" styleClass="gauge-marker-primary"/>
                            <Label text="60" layoutX="330" layoutY="230" styleClass="gauge-marker"/>
                            <Label text="125" layoutX="190" layoutY="335" styleClass="gauge-marker"/>
                            <Label text="190" layoutX="50" layoutY="230" styleClass="gauge-marker"/>
                            <Label text="250+" layoutX="95" layoutY="80" styleClass="gauge-marker"/>
                        </Group>

                        <Group fx:id="uploadMarkers" opacity="0.0" scaleX="0.5" scaleY="0.5">
                            <Label text="0" layoutX="275" layoutY="80" styleClass="gauge-marker-primary"/>
                            <Label text="25" layoutX="330" layoutY="230" styleClass="gauge-marker"/>
                            <Label text="50" layoutX="190" layoutY="335" styleClass="gauge-marker"/>
                            <Label text="75" layoutX="55" layoutY="230" styleClass="gauge-marker"/>
                            <Label text="100+" layoutX="95" layoutY="80" styleClass="gauge-marker"/>
                        </Group>

                        <VBox layoutX="100" layoutY="140" styleClass="speed-display-box" mouseTransparent="true">
                            <Label fx:id="speedValueLabel" text="0.0" styleClass="speed-value-label"/>
                            <Label fx:id="statusLabel" text="Ready for Testing!" styleClass="status-label"/>
                        </VBox>
                    </Pane>
                </StackPane>

                <VBox styleClass="feedback-container" spacing="5">
                    <Label fx:id="speedFeedbackLabel" styleClass="feedback-label" wrapText="true"/>
                </VBox>

                <Button fx:id="actionButton"
                        text="RUN TEST"
                        onAction="#handleActionButtonClick"
                        onMouseEntered="#handleHoverStart"
                        onMouseExited="#handleHoverEnd"
                        styleClass="pulse-button"/>
            </VBox>
        </Tab>

        <Tab text="HISTORY">
            <VBox styleClass="history-container" spacing="10" VBox.vgrow="ALWAYS">
                <LineChart fx:id="historyLineChart"
                           animated="false"
                           legendSide="TOP"
                           VBox.vgrow="ALWAYS"
                           styleClass="history-line-chart">
                    <xAxis>
                        <NumberAxis fx:id="historyXAxis" side="BOTTOM" label="Time" forceZeroInRange="false" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis side="LEFT" label="Speed (Mbps)" />
                    </yAxis>
                </LineChart>
            </VBox>
        </Tab>
    </TabPane>
</VBox>